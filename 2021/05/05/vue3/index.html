<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Vue3.0," />










<meta name="description" content="Vue3.0学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3.0学习笔记">
<meta property="og:url" content="http://chichisky.github.io/2021/05/05/vue3/index.html">
<meta property="og:site_name" content="chichisky">
<meta property="og:description" content="Vue3.0学习笔记">
<meta property="og:locale">
<meta property="og:image" content="c:/Users/24623/Desktop/学习笔记/vue3/1.2.png">
<meta property="article:published_time" content="2021-05-05T13:26:18.294Z">
<meta property="article:modified_time" content="2021-05-22T05:36:25.004Z">
<meta property="article:author" content="chichisky">
<meta property="article:tag" content="Vue3.0">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/24623/Desktop/学习笔记/vue3/1.2.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://chichisky.github.io/2021/05/05/vue3/"/>





  <title>Vue3.0学习笔记 | chichisky</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d45637e65c815e018ad5fa352baa4df0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">chichisky</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">chichisky</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://chichisky.github.io/2021/05/05/vue3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="chichisky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vue3.0学习笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-05-05T21:26:18+08:00">
                2021-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Vue3.0学习笔记 <span id="more"></span></p>
<h1 id="Vue3-0学习笔记"><a href="#Vue3-0学习笔记" class="headerlink" title="Vue3.0学习笔记"></a>Vue3.0学习笔记</h1><h2 id="1-Vue3-0与Vue2-x的不同"><a href="#1-Vue3-0与Vue2-x的不同" class="headerlink" title="1.Vue3.0与Vue2.x的不同"></a>1.Vue3.0与Vue2.x的不同</h2><h3 id="1-1Vue3-0的六大亮点"><a href="#1-1Vue3-0的六大亮点" class="headerlink" title="1.1Vue3.0的六大亮点"></a>1.1Vue3.0的六大亮点</h3><ul>
<li>Performance：性能比Vue 2.x 快 1.2~2倍</li>
<li>Tree shaking suport：按需编译，体积比Vue 2.x 更小</li>
<li>Composition API：组合API(类似 React Hooks)</li>
<li>Better Typescript suport：更好的TS支持</li>
<li>Custom Renderer API：暴露了自定义渲染API</li>
<li>Fragment，Teleport(Protal), Suspense：更先进的组件</li>
</ul>
<h3 id="1-2-Vue3-0是如何变快的"><a href="#1-2-Vue3-0是如何变快的" class="headerlink" title="1.2 Vue3.0是如何变快的"></a>1.2 Vue3.0是如何变快的</h3><ul>
<li><p>diff方法优化：vue3转化网址 <a target="_blank" rel="noopener" href="https://vue-next-template-explorer.netlify.app/">https://vue-next-template-explorer.netlify.app/</a></p>
<ul>
<li><p>Vue2中的虚拟dom是进行全局的对比</p>
</li>
<li><p>Vue3新增了静态标记(PathFlag),</p>
<p>在与上次虚拟节点进行对比时候，只对比带有PathFlag 的节点，并且可以通过flag的信息得知当前节点要对比的具体内容</p>
</li>
</ul>
</li>
</ul>
<p><img src="C:\Users\24623\Desktop\学习笔记\vue3\1.2.png" alt="1.2"></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">,</span> _cache<span class="token punctuation">,</span> $props<span class="token punctuation">,</span> $setup<span class="token punctuation">,</span> $data<span class="token punctuation">,</span> $options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">_openBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_createBlock</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"哈哈"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* TEXT */</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>hoistStatic 静态提升<ul>
<li>Vue2中无论元素是否参与更新，每次都会重新创建，然后再渲染</li>
<li>Vue3中对于不参与更新的元素，会做静态提升，只会被创建一次，在渲染时直接复用即可</li>
</ul>
</li>
<li>没有进行静态提升之前</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">,</span> _cache<span class="token punctuation">,</span> $props<span class="token punctuation">,</span> $setup<span class="token punctuation">,</span> $data<span class="token punctuation">,</span> $options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">_openBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_createBlock</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"哈哈"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* TEXT */</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>进行静态提升之后</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> _hoisted_1 <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span><span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"哈哈"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">/* HOISTED */</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">,</span> _cache<span class="token punctuation">,</span> $props<span class="token punctuation">,</span> $setup<span class="token punctuation">,</span> $data<span class="token punctuation">,</span> $options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">_openBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_createBlock</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    _hoisted_1<span class="token punctuation">,</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* TEXT */</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>cacheHandlers 事件监听器缓存<ul>
<li>默认情况下onClick会视为动态绑定，所以每次都会去追踪它的变化</li>
<li>但是因为是同一个函数，所以没有追踪变化，直接缓存起来服用即可</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token operator">&lt;</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"btn"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li>开启事件缓存之前</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">,</span> _cache<span class="token punctuation">,</span> $props<span class="token punctuation">,</span> $setup<span class="token punctuation">,</span> $data<span class="token punctuation">,</span> $options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">_openBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_createBlock</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> onClick<span class="token operator">:</span> _ctx<span class="token punctuation">.</span>btn <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token comment">/* PROPS */</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"onClick"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>开启事件缓存之后</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">,</span> _cache<span class="token punctuation">,</span> $props<span class="token punctuation">,</span> $setup<span class="token punctuation">,</span> $data<span class="token punctuation">,</span> $options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">_openBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_createBlock</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      onClick<span class="token operator">:</span> _cache<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_cache<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>btn <span class="token operator">&amp;&amp;</span> _ctx<span class="token punctuation">.</span><span class="token function">btn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>注：没有静态标记，所以不会追踪变化，性能提升</p>
</li>
<li><p>ssr渲染</p>
<ul>
<li>当有大量静态的内容时候，这些内容会被当做纯字符串推进一个buffer里面，即使存在动态的绑定，会通过模板插值嵌入进去，这样会比通过虚拟dom来渲染的快上很多很多。</li>
<li>当静态内容达到一定量级时候，会用_createStaticVNode方法在客户端去生成一个static node,这些静态demo，会被直接innerHTML,就不需要创建对象，然后根据对象渲染。</li>
</ul>
</li>
</ul>
<h3 id="Vite"><a href="#Vite" class="headerlink" title="Vite"></a>Vite</h3><ul>
<li>安装Vite</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm install -g create-vite-app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>利用Vite创建Vue3项目</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">create-vite-app projectName<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>安装依赖运行项目</li>
</ul>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd projectName
npm install
npm run dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="组合API"><a href="#组合API" class="headerlink" title="组合API"></a>组合API</h2><ul>
<li>setup()函数是组合API的入口函数</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
  import &#123;ref&#125; from &#39;vue&#39;;
  &#x2F;&#x2F;ref函数只能监听简单类型的变化，不能监听复杂类型的变化(对象&#x2F;数组)
  import &#123;reactive&#125; from &#39;vue&#39;;
export defult &#123;
  name: &#39;App&#39;
  &#x2F;&#x2F;setup函数是组合API的入口函数
  setup() &#123;
    &#x2F;&#x2F; let count &#x3D; ref(0)
    &#x2F;&#x2F; 定义了一个名称叫做count变量，这个变量的初始值是0，这个变量发生改变之后，Vue会自动更新UI
    let count &#x3D; ref(0)
    &#x2F;&#x2F; 注：在组合API中定义的方法或变量，要想在外界使用，必须通过return &#123;xx,xx&#125;暴露出去
    return &#123;count&#125;
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="setup的执行时机"><a href="#setup的执行时机" class="headerlink" title="setup的执行时机"></a>setup的执行时机</h4><ul>
<li>setup函数是在beforecreate钩子之前完成的</li>
</ul>
<h4 id="setup注意点"><a href="#setup注意点" class="headerlink" title="setup注意点"></a>setup注意点</h4><ul>
<li>由于在执行setup函数的时候，还没执行created生命周期是方法，所有在setup函数中，无法使用data，和methods</li>
<li>由于我们不能在setup函数中使用data和methods，所有vue为了避免我们错误使用，将setup函数中this修改成了undefined</li>
<li>setup函数只能是同步的，不能是异步的</li>
</ul>
<h4 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h4><ul>
<li>什么是reactive？<ul>
<li>reactive是Vue3中提供的实现响应式数据的方法</li>
<li>在Vue2中响应式数据是通过defineProperty来实现的，而在Vue3中响应式数据是通过ES6的Proxy来实现的</li>
</ul>
</li>
<li>reactive注意点：<ul>
<li>reactive参数必须是对象(json, arr)</li>
<li>如果给reactive传递了其他对象<ul>
<li>默认情况下修改对象，界面不会自动更新</li>
<li>如果想更新，可以通过重新赋值的方式</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
  import &#123;reactive&#125; from &#39;vue&#39;;
export defult &#123;
  name: &#39;App&#39;
  setup() &#123;
    &#x2F;&#x2F; 创建一个响应式数据
    &#x2F;&#x2F; 本质：就是将传入的数据包装成一个Proxy对象
    const state &#x3D; reactive(&#123;
      age: 123
    &#125;);
    function myFn() &#123;
      state.age &#x3D; 666;
      console.log(state);
    &#125;
    return &#123;state, myFn&#125;
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="实现reactive"><a href="#实现reactive" class="headerlink" title="实现reactive"></a>实现reactive</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// 如果是一个数组，就取出数组中的每一个元素</span>
      <span class="token comment">// 判断每一个元素是否又是一个对象，如果是一个对象，则也需要包装成Proxy对象</span>
      obj<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          obj<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// 如果是一个对象，也取出对象中的每一个元素</span>
      <span class="token comment">// 判断每一个元素是否又是一个对象，如果是一个对象，则也需要包装成Proxy对象</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> item <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
      <span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// console.log(obj, key, val);</span>
        obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"更新UI界面"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
  
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  gf<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      c<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      s<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        d<span class="token operator">:</span> <span class="token number">4</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>


<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

state<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span>gf<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span>gf<span class="token punctuation">.</span>f<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span>gf<span class="token punctuation">.</span>f<span class="token punctuation">.</span>s<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><ul>
<li>ref本质<ul>
<li>ref本质上还是reactive</li>
<li>当我们给ref函数传递一个值之后，ref函数底层会自动将ref转化成reactive</li>
<li>ref(18) =&gt; reactive({value: 18})</li>
<li>如果直接改变值，则界面不会刷新，想要触发刷新，需要改变value的值</li>
<li>如果我们利用ref将某一个对象中的基本属性变成响应式的数据，我们修改响应式的数据是不会影响到原始数据的  </li>
</ul>
</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
  import &#123;ref&#125; from &#39;vue&#39;;
export defult &#123;
  name: &#39;App&#39;
  setup() &#123;
    let age &#x3D; ref(18)
    function myFn() &#123;
      age.value &#x3D; 666
      console.log(age);
    &#125;
    return &#123;age, myFn&#125;
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="ref和reactive的区别"><a href="#ref和reactive的区别" class="headerlink" title="ref和reactive的区别"></a>ref和reactive的区别</h4><ul>
<li><p>如果在template中使用的是ref类型的数据，那么Vue会自动帮我们添加 .value</p>
</li>
<li><p>如果在template中使用的是reactive类型的数据，那么Vue不会帮我们添加  .value</p>
</li>
<li><p>Vue是如何决定是否需要自动添加 .value的</p>
<ul>
<li>Vue在解析数据之前，会自动判断这个函数是否是ref类型的，如果是就自动添加.value，如果不是就不自动添加.value</li>
</ul>
</li>
<li><p>Vue是如何判断当前的数据是否是ref类型的</p>
<ul>
<li>通过当前数据 __v_ref 来判断的</li>
<li>如果有这个私有的属性，并且取值为true，那么就代表是一个ref类型的数据</li>
</ul>
</li>
<li><p>isRef 、isReactive</p>
<ul>
<li>isRef 用来判断是否为ref类型</li>
<li>isReactive 用来判断是否为reactive类型</li>
</ul>
</li>
</ul>
<h4 id="递归监听"><a href="#递归监听" class="headerlink" title="递归监听"></a>递归监听</h4><ul>
<li>默认情况下，无论是通过ref还是reactive都是递归监听</li>
<li>即无论有多少层，每一层都可以监听到变化</li>
<li>递归监听存在的问题<ul>
<li>如果数据量比较大，非常消耗性能</li>
<li>因为它把每一层都包装成了一个Proxy对象</li>
</ul>
</li>
</ul>
<h4 id="非递归监听"><a href="#非递归监听" class="headerlink" title="非递归监听"></a>非递归监听</h4><ul>
<li>shallowReactive、shallowRef</li>
<li>非递归监听只会监听最外面一层</li>
<li>修改其他层级变量，需要同时修改最外层变量，否则，修改不生效。</li>
<li>shallowRef 最外面一层，为变量.value</li>
<li>shallowRef(10) =&gt; shallowReactive({value: 10})</li>
</ul>
<h5 id="实现shallowReactive"><a href="#实现shallowReactive" class="headerlink" title="实现shallowReactive"></a>实现shallowReactive</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
      obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"更新UI界面"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  gf<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      c<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      s<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        d<span class="token operator">:</span> <span class="token number">4</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// state.a = 5;</span>
state<span class="token punctuation">.</span>gf<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span>gf<span class="token punctuation">.</span>f<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span>gf<span class="token punctuation">.</span>f<span class="token punctuation">.</span>s<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="实现shallowRef"><a href="#实现shallowRef" class="headerlink" title="实现shallowRef"></a>实现shallowRef</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">shallowRef</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>value<span class="token operator">:</span> val<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
      obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"更新UI界面"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  gf<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      c<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      s<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        d<span class="token operator">:</span> <span class="token number">4</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  a<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  gf<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    b<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      c<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      s<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        d<span class="token operator">:</span> <span class="token number">8</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="triggerRef"><a href="#triggerRef" class="headerlink" title="triggerRef"></a>triggerRef</h4><ul>
<li>作用：根据传入的数据，主动的去更新页面</li>
<li>用法：triggerRef(state)</li>
<li>注意：Vue3只提供了triggerRef方法，没有提供triggerReactive方法，所以，如果是reactive类型的数据，无法主动触发界面更新的</li>
</ul>
<h4 id="setup中普通对象跟Proxy对象"><a href="#setup中普通对象跟Proxy对象" class="headerlink" title="setup中普通对象跟Proxy对象"></a>setup中普通对象跟Proxy对象</h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
  import &#123;reactive&#125; from &#39;vue&#39;;
export defult &#123;
  name: &#39;App&#39;
  setup() &#123;
    let obj &#x3D; &#123;
      name: &#39;chichi&#39;
    &#125;
    let state &#x3D; reactive(obj);
    console.log(obj &#x3D;&#x3D;&#x3D; state)  &#x2F;&#x2F; false
    &#x2F;&#x2F; state跟obj的关系
    &#x2F;&#x2F; 引用关系，state的本质是一个Proxy对象，在这个Proxy对象中引用了obj
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>如果更改普通对象的值，则界面不会刷新</li>
<li>想要刷新，必须修改Proxy对象相关属性的值</li>
</ul>
<h4 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a>toRaw</h4><ul>
<li><p>ref/reactive数据类型的特点：</p>
<ul>
<li>每次修改都会被追踪，都会更新UI界面，但是这样其实是非常消耗性能的，所以如果我们有一些操作不需要追踪，不需要更新UI界面，那么这个时候，我们就可以通过toRaw方法拿到它的原始数据，对原始数据进行修改，这样就不会被追踪， 这样就不会更新UI界面，这样性能就好了</li>
</ul>
</li>
<li><p>如果想通过toRaw拿到ref类型的原始数据（创建时传入的那个数据）</p>
<ul>
<li><p>那么必须明确的告诉toRaw方法，要获取的值是.value的值</p>
</li>
<li><p>~~~shell<br>let obj2 = toRaw(state.value)</p>
<pre class="line-numbers language-none"><code class="language-none">
#### markRaw

- 作用：永远都不会被追踪

~~~vue
&lt;script&gt;
import &#123;reactive, markRaw&#125; from &#39;vue&#39;;
export default &#123;
  name: &quot;App&quot;,
  setup() &#123;
    let a &#x3D; &#123;name: &quot;chichi&quot;&#125;
    a &#x3D; markRaw(a);
    let state &#x3D; reactive(a);
    
    function btn () &#123;
      state.name &#x3D; &#39;chichisky&#39;;
      console.log(state);
    &#125;
    return &#123;btn, state&#125;
  &#125;
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<h4 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
import &#123;toRef, toRefs&#125; from &#39;vue&#39;;
export default &#123;
  name: &quot;App&quot;,
  setup() &#123;
    let a &#x3D; &#123;name: &quot;chichi&quot;&#125;
    let b &#x3D; &#123;name: &quot;chichi&quot;, age: 13&#125;

    let state &#x3D; toRef(a,&#39;name&#39;);
    let state2 &#x3D; toRefs(b)
    
    function btn () &#123;
      state.value &#x3D; &#39;chichisky&#39;;
      console.log(state);  &#x2F;&#x2F; value: &quot;chichisky&quot;
      console.log(a);   &#x2F;&#x2F; name: &quot;chichisky&quot;

      state2.name.value &#x3D; &#39;chichikaai&#39;;
      state2.age.value &#x3D; 18;
      console.log(state2);
      console.log(b);
    &#125;
    return &#123;btn, state, state2&#125;
  &#125;
&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>如果利用toRef将某一个对象中的属性变成响应式的数据，我们修改响应式的数据是会影响到原始数据的</li>
<li>但是如果响应式的数据是通过toRef创建的，那么修改了数据并不会触发界面的更新</li>
<li>toRef的应用场景：<ul>
<li>如果想让响应式数据和以前的数据关联起来，并且更新响应式数据之后还不想更新UI，那么可以使用toRef</li>
</ul>
</li>
<li>toRefs相当于给遍历对象，给对象的每一个属性都添加了toRef</li>
</ul>
<h4 id="ref-amp-reRef-的区别"><a href="#ref-amp-reRef-的区别" class="headerlink" title="ref &amp; reRef 的区别"></a>ref &amp; reRef 的区别</h4><ul>
<li>ref =&gt; 复制，修改响应式数据不会影响以前的数据</li>
<li>toRef =&gt; 引用，修改响应式数据会影响以前的数据</li>
<li>ref =&gt;数据发生改变，界面就会自动更新</li>
<li>toRef =&gt;数据发生改变，界面也不会自动更新</li>
</ul>
<h4 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h4><ul>
<li>返回一个ref对象，可以显示地控制依赖追踪和触发响应</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">myRef</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 告诉Vue这个数据是需要追踪变化的</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function">set</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 告诉Vue触发界面更新</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>不能在get方法中发送网络请求<ul>
<li>渲染界面 =&gt;  调用get =&gt; 发送网络请求</li>
<li>保存数据 =&gt; 更新界面 =&gt; 调用get</li>
</ul>
</li>
</ul>
<h4 id="在setup函数中，如何使用生命周期钩子"><a href="#在setup函数中，如何使用生命周期钩子" class="headerlink" title="在setup函数中，如何使用生命周期钩子"></a>在setup函数中，如何使用生命周期钩子</h4><ul>
<li>想使用哪一个导入哪一个</li>
<li>Vue3.x通过ref获取元素</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div ref &#x3D; &quot;box&quot;&gt;
    box
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
import &#123; ref, onMounted &#125; from &quot;vue&quot;;
export default &#123;
  name: &quot;App&quot;,
  setup() &#123;
    let box &#x3D; ref(null);
    onMounted(() &#x3D;&gt; &#123;console.log(box.value);&#125;)
    console.log(box.value);
    return &#123; box &#125;;
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="readonly家族"><a href="#readonly家族" class="headerlink" title="readonly家族"></a>readonly家族</h4><ul>
<li>readonly<ul>
<li>创建一个只能的数据，并且是递归只读</li>
</ul>
</li>
<li>shallowReadonly<ul>
<li>创建一个只读的数据，但是不是递归只读，内层可以改变</li>
</ul>
</li>
<li>实现shallowReadonly</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">shallowReadonly</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token function">get</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">set</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>key<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">是只读的，不可以更改</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  gf<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    f<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      c<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      s<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        d<span class="token operator">:</span> <span class="token number">4</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowReadonly</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

state<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>isReadonly<ul>
<li>判断一个数据是不是只读的数据</li>
</ul>
</li>
<li>const和readonly区别<ul>
<li>const：赋值保护，不能给变量重新赋值</li>
<li>readonly：属性保护，不能给属性重新赋值</li>
</ul>
</li>
</ul>
<h2 id="vue3响应式数据本质"><a href="#vue3响应式数据本质" class="headerlink" title="vue3响应式数据本质"></a>vue3响应式数据本质</h2><ul>
<li>在Vue2.x中是通过defineProperty来实现响应式数据的<ul>
<li>对Vue2.x进行补充，如何实现双向绑定,数据劫持代理</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  name<span class="token operator">:</span> <span class="token string">'chichi'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">22</span>
<span class="token punctuation">&#125;</span>


<span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span> <span class="token punctuation">(</span>_this<span class="token punctuation">,</span> item<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 用来获取扩展属性值的，当获取该属性值时调用get方法</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> data<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// 监视扩展属性的，只要一修改就调用</span>
    <span class="token function">set</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      data<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_this<span class="token punctuation">)</span><span class="token punctuation">;</span>
_this<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_this<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>在Vue3.x中是通过Proxy来实现响应式数据的</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">let obj &#x3D; &#123;name: &quot;chichi&quot;, age: 18&#125;;
let state &#x3D; new Proxy(obj, &#123;
	get(obj, key) &#123;
		console.log(obj[key]);
		return obj[key];
	&#125;,
	set(obj, key, newValue) &#123;
		console.log(obj, key, newValue);
		obj[key] &#x3D; newValue;
		console.log(obj);
    console.log(&quot;更新UI界面&quot;);
	&#125;
&#125;)

state.name &#x3D; &quot;chichisky&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>一定要在set方法中设置一个返回值，告诉程序上一次操作是否成功</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
	<span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
		arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"更新UI界面"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

state<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment">// get    =>   3</span>
<span class="token comment">// set</span>
<span class="token comment">// 第一次操作 [ 1, 3, 5 ] 3 7   =>   [ 1, 3, 5, 7 ]   =>   更新UI界面</span>
<span class="token comment">// 第二次操作 [ 1, 3, 5, 7 ] length 4   =>   [ 1, 3, 5, 7 ]   =>    更新UI界面</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Vue3-0/" rel="tag"># Vue3.0</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/05/05/js-es6/" rel="next" title="JS(ES6)数据结构和算法 学习笔记">
                <i class="fa fa-chevron-left"></i> JS(ES6)数据结构和算法 学习笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/05/05/task-jobs/" rel="prev" title="Task&Jobs">
                Task&Jobs <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7Carchive">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue3-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="nav-number">1.</span> <span class="nav-text">Vue3.0学习笔记</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Vue3-0%E4%B8%8EVue2-x%E7%9A%84%E4%B8%8D%E5%90%8C"><span class="nav-number">1.1.</span> <span class="nav-text">1.Vue3.0与Vue2.x的不同</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1Vue3-0%E7%9A%84%E5%85%AD%E5%A4%A7%E4%BA%AE%E7%82%B9"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1Vue3.0的六大亮点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Vue3-0%E6%98%AF%E5%A6%82%E4%BD%95%E5%8F%98%E5%BF%AB%E7%9A%84"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2 Vue3.0是如何变快的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vite"><span class="nav-number">1.1.3.</span> <span class="nav-text">Vite</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88API"><span class="nav-number">1.2.</span> <span class="nav-text">组合API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#setup%E7%9A%84%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">setup的执行时机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setup%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">setup注意点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reactive"><span class="nav-number">1.2.0.3.</span> <span class="nav-text">reactive</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0reactive"><span class="nav-number">1.2.0.3.1.</span> <span class="nav-text">实现reactive</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ref"><span class="nav-number">1.2.0.4.</span> <span class="nav-text">ref</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ref%E5%92%8Creactive%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.2.0.5.</span> <span class="nav-text">ref和reactive的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%92%E5%BD%92%E7%9B%91%E5%90%AC"><span class="nav-number">1.2.0.6.</span> <span class="nav-text">递归监听</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E9%80%92%E5%BD%92%E7%9B%91%E5%90%AC"><span class="nav-number">1.2.0.7.</span> <span class="nav-text">非递归监听</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0shallowReactive"><span class="nav-number">1.2.0.7.1.</span> <span class="nav-text">实现shallowReactive</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0shallowRef"><span class="nav-number">1.2.0.7.2.</span> <span class="nav-text">实现shallowRef</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#triggerRef"><span class="nav-number">1.2.0.8.</span> <span class="nav-text">triggerRef</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setup%E4%B8%AD%E6%99%AE%E9%80%9A%E5%AF%B9%E8%B1%A1%E8%B7%9FProxy%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.2.0.9.</span> <span class="nav-text">setup中普通对象跟Proxy对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#toRaw"><span class="nav-number">1.2.0.10.</span> <span class="nav-text">toRaw</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#toRef"><span class="nav-number">1.2.0.11.</span> <span class="nav-text">toRef</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ref-amp-reRef-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.2.0.12.</span> <span class="nav-text">ref &amp; reRef 的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#customRef"><span class="nav-number">1.2.0.13.</span> <span class="nav-text">customRef</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8setup%E5%87%BD%E6%95%B0%E4%B8%AD%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90"><span class="nav-number">1.2.0.14.</span> <span class="nav-text">在setup函数中，如何使用生命周期钩子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#readonly%E5%AE%B6%E6%97%8F"><span class="nav-number">1.2.0.15.</span> <span class="nav-text">readonly家族</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue3%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E6%9C%AC%E8%B4%A8"><span class="nav-number">1.3.</span> <span class="nav-text">vue3响应式数据本质</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chichisky</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
